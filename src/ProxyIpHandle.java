import com.alibaba.fastjson.JSONArray;
import entity.ProxyIpInfo;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.control.TableView;

import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * 类名 ClassName  ProxyIpHandle
 * 项目 ProjectName  AutomaticAccess
 * 作者 Author  郑添翼 Taky.Zheng
 * 邮箱 E-mail 275158188@qq.com
 * 时间 Date  2019-07-04 15:10 ＞ω＜
 * 描述 Description TODO
 */
public class ProxyIpHandle {

    static int count = 0;

    /**
     * 提取代理IP
     * @param url
     * @return
     */
    public static ObservableList<ProxyIpInfo> getIps(String url){
        //String str = ProxyUtil.commonConnection(url);
        String str = "{\"code\":200,\"msg\":\"\",\"data\":[{\"ip\":\"183.130.57.242\",\"port\":4945,\"expire_time\":\"2019-07-04 19:55:24\",\"city\":\"\\u6e29\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.67.94.28\",\"port\":4945,\"expire_time\":\"2019-07-04 19:52:38\",\"city\":\"\\u961c\\u9633\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"223.241.176.178\",\"port\":940,\"expire_time\":\"2019-07-04 19:55:12\",\"city\":\"\\u9a6c\\u978d\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.231.241.66\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:36\",\"city\":\"\\u5357\\u901a\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"116.248.186.52\",\"port\":62563,\"expire_time\":\"2019-07-04 19:46:15\",\"city\":\"\\u8fea\\u5e86\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"27.202.210.172\",\"port\":4945,\"expire_time\":\"2019-07-04 19:40:24\",\"city\":\"\\u4e1c\\u8425\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"113.238.189.223\",\"port\":4945,\"expire_time\":\"2019-07-04 19:52:19\",\"city\":\"\\u76d8\\u9526\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"220.184.215.123\",\"port\":62563,\"expire_time\":\"2019-07-04 19:42:32\",\"city\":\"\\u676d\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"60.168.240.105\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:22\",\"city\":\"\\u5408\\u80a5\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.85.161.216\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:33\",\"city\":\"\\u5357\\u660c\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"180.105.117.236\",\"port\":4945,\"expire_time\":\"2019-07-04 19:52:33\",\"city\":\"\\u8fde\\u4e91\\u6e2f\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"119.115.246.16\",\"port\":271,\"expire_time\":\"2019-07-04 19:50:21\",\"city\":\"\\u629a\\u987a\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"114.237.209.51\",\"port\":14568,\"expire_time\":\"2019-07-04 19:37:35\",\"city\":\"\\u8fde\\u4e91\\u6e2f\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.165.61.153\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:09\",\"city\":\"\\u5ba3\\u57ce\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.70.19.57\",\"port\":14568,\"expire_time\":\"2019-07-04 19:45:19\",\"city\":\"\\u9a6c\\u978d\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"113.75.2.127\",\"port\":7791,\"expire_time\":\"2019-07-04 19:50:29\",\"city\":\"\\u6cb3\\u6e90\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"39.79.86.126\",\"port\":4945,\"expire_time\":\"2019-07-04 19:55:33\",\"city\":\"\\u4e1c\\u8425\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"113.138.141.71\",\"port\":4945,\"expire_time\":\"2019-07-04 19:40:25\",\"city\":\"\\u5b89\\u5eb7\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"36.57.41.231\",\"port\":62563,\"expire_time\":\"2019-07-04 20:02:24\",\"city\":\"\\u961c\\u9633\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"122.190.54.61\",\"port\":14568,\"expire_time\":\"2019-07-04 19:47:07\",\"city\":\"\\u968f\\u5dde\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"116.55.175.57\",\"port\":7791,\"expire_time\":\"2019-07-04 20:00:41\",\"city\":\"\\u897f\\u53cc\\u7248\\u7eb3\\u50a3\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"49.79.128.200\",\"port\":271,\"expire_time\":\"2019-07-04 19:40:29\",\"city\":\"\\u5357\\u901a\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.165.40.68\",\"port\":14568,\"expire_time\":\"2019-07-04 19:40:09\",\"city\":\"\\u5ba3\\u57ce\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"120.7.168.230\",\"port\":940,\"expire_time\":\"2019-07-04 19:50:22\",\"city\":\"\\u5eca\\u574a\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"49.87.247.202\",\"port\":14568,\"expire_time\":\"2019-07-04 19:47:31\",\"city\":\"\\u6dee\\u5b89\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"175.172.85.94\",\"port\":62563,\"expire_time\":\"2019-07-04 20:00:24\",\"city\":\"\\u6c88\\u9633\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"124.112.94.171\",\"port\":62563,\"expire_time\":\"2019-07-04 19:37:20\",\"city\":\"\\u961c\\u9633\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.96.168.207\",\"port\":271,\"expire_time\":\"2019-07-04 20:00:49\",\"city\":\"\\u6dee\\u5317\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.95.174.115\",\"port\":940,\"expire_time\":\"2019-07-04 19:55:20\",\"city\":\"\\u5bbf\\u8fc1\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"123.131.36.55\",\"port\":14568,\"expire_time\":\"2019-07-04 20:00:08\",\"city\":\"\\u6f4d\\u574a\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"116.55.173.137\",\"port\":4945,\"expire_time\":\"2019-07-04 19:40:08\",\"city\":\"\\u897f\\u53cc\\u7248\\u7eb3\\u50a3\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.99.6.55\",\"port\":4945,\"expire_time\":\"2019-07-04 19:57:18\",\"city\":\"\\u94dc\\u9675\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.143.32.93\",\"port\":271,\"expire_time\":\"2019-07-04 19:45:28\",\"city\":\"\\u6e56\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.165.29.72\",\"port\":14568,\"expire_time\":\"2019-07-04 20:00:16\",\"city\":\"\\u5ba3\\u57ce\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"112.113.153.42\",\"port\":62563,\"expire_time\":\"2019-07-04 20:00:42\",\"city\":\"\\u4fdd\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.64.232.69\",\"port\":4945,\"expire_time\":\"2019-07-04 19:45:12\",\"city\":\"\\u5408\\u80a5\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.98.37.87\",\"port\":14568,\"expire_time\":\"2019-07-04 20:00:38\",\"city\":\"\\u8d63\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.244.168.183\",\"port\":271,\"expire_time\":\"2019-07-04 19:45:09\",\"city\":\"\\u66f2\\u9756\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"220.175.214.114\",\"port\":940,\"expire_time\":\"2019-07-04 19:40:21\",\"city\":\"\\u666f\\u5fb7\\u9547\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"220.175.214.97\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:27\",\"city\":\"\\u666f\\u5fb7\\u9547\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"60.187.166.175\",\"port\":271,\"expire_time\":\"2019-07-04 19:50:14\",\"city\":\"\\u7ecd\\u5174\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.243.148.164\",\"port\":14568,\"expire_time\":\"2019-07-04 19:40:27\",\"city\":\"\\u5fb7\\u5b8f\\u50a3\\u65cf\\u666f\\u9887\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"218.63.39.33\",\"port\":62563,\"expire_time\":\"2019-07-04 19:52:25\",\"city\":\"\\u7ea2\\u6cb3\\u54c8\\u5c3c\\u65cf\\u5f5d\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"220.179.210.216\",\"port\":62563,\"expire_time\":\"2019-07-04 19:42:11\",\"city\":\"\\u94dc\\u9675\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.107.247.111\",\"port\":271,\"expire_time\":\"2019-07-04 19:50:25\",\"city\":\"\\u516d\\u5b89\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.81.226.196\",\"port\":4945,\"expire_time\":\"2019-07-04 19:51:16\",\"city\":\"\\u82cf\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"116.248.186.80\",\"port\":14568,\"expire_time\":\"2019-07-04 19:46:18\",\"city\":\"\\u8fea\\u5e86\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"119.115.68.18\",\"port\":4945,\"expire_time\":\"2019-07-04 19:57:32\",\"city\":\"\\u76d8\\u9526\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"117.90.7.195\",\"port\":271,\"expire_time\":\"2019-07-04 19:45:21\",\"city\":\"\\u9547\\u6c5f\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"42.176.132.12\",\"port\":14568,\"expire_time\":\"2019-07-04 19:49:18\",\"city\":\"\\u978d\\u5c71\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"59.63.75.135\",\"port\":271,\"expire_time\":\"2019-07-04 19:30:37\",\"city\":\"\\u666f\\u5fb7\\u9547\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"111.73.242.2\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:07\",\"city\":\"\\u5357\\u660c\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"60.168.245.95\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:32\",\"city\":\"\\u5408\\u80a5\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"116.248.187.227\",\"port\":7791,\"expire_time\":\"2019-07-04 19:46:11\",\"city\":\"\\u8fea\\u5e86\\u85cf\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"124.132.103.6\",\"port\":7791,\"expire_time\":\"2019-07-04 20:00:11\",\"city\":\"\\u83b1\\u829c\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"119.115.64.171\",\"port\":940,\"expire_time\":\"2019-07-04 19:37:32\",\"city\":\"\\u76d8\\u9526\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"49.67.105.127\",\"port\":940,\"expire_time\":\"2019-07-04 19:40:42\",\"city\":\"\\u5357\\u901a\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"101.20.60.231\",\"port\":62563,\"expire_time\":\"2019-07-04 19:40:28\",\"city\":\"\\u5eca\\u574a\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"49.87.175.188\",\"port\":4945,\"expire_time\":\"2019-07-04 19:47:28\",\"city\":\"\\u6dee\\u5b89\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.66.94.185\",\"port\":62563,\"expire_time\":\"2019-07-04 19:45:32\",\"city\":\"\\u9a6c\\u978d\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.240.195.143\",\"port\":7791,\"expire_time\":\"2019-07-04 19:55:31\",\"city\":\"\\u6012\\u6c5f\\u5088\\u50f3\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.130.54.122\",\"port\":62563,\"expire_time\":\"2019-07-04 20:00:21\",\"city\":\"\\u6e29\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.130.63.3\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:18\",\"city\":\"\\u6e29\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"106.110.103.167\",\"port\":14568,\"expire_time\":\"2019-07-04 19:50:28\",\"city\":\"\\u5f90\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"175.175.142.246\",\"port\":7791,\"expire_time\":\"2019-07-04 19:57:18\",\"city\":\"\\u76d8\\u9526\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"114.220.157.240\",\"port\":271,\"expire_time\":\"2019-07-04 19:41:32\",\"city\":\"\\u82cf\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.166.40.146\",\"port\":4945,\"expire_time\":\"2019-07-04 19:37:22\",\"city\":\"\\u6dee\\u5357\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"180.109.241.182\",\"port\":62563,\"expire_time\":\"2019-07-04 19:45:35\",\"city\":\"\\u5357\\u4eac\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.99.3.9\",\"port\":7791,\"expire_time\":\"2019-07-04 19:47:29\",\"city\":\"\\u94dc\\u9675\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"113.117.65.225\",\"port\":62563,\"expire_time\":\"2019-07-04 19:57:33\",\"city\":\"\\u63ed\\u9633\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"223.241.183.3\",\"port\":4945,\"expire_time\":\"2019-07-04 20:00:50\",\"city\":\"\\u9a6c\\u978d\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.231.149.29\",\"port\":940,\"expire_time\":\"2019-07-04 19:40:16\",\"city\":\"\\u5357\\u901a\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"220.178.192.225\",\"port\":4945,\"expire_time\":\"2019-07-04 19:57:39\",\"city\":\"\\u6dee\\u5357\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"113.143.56.193\",\"port\":62563,\"expire_time\":\"2019-07-04 19:55:08\",\"city\":\"\\u5ef6\\u5b89\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"113.103.119.103\",\"port\":4945,\"expire_time\":\"2019-07-04 19:42:19\",\"city\":\"\\u63ed\\u9633\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"61.138.222.3\",\"port\":14568,\"expire_time\":\"2019-07-04 19:45:21\",\"city\":\"\\u7389\\u6eaa\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.69.9.186\",\"port\":271,\"expire_time\":\"2019-07-04 19:42:28\",\"city\":\"\\u6dee\\u5357\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"39.66.13.183\",\"port\":62563,\"expire_time\":\"2019-07-04 19:40:21\",\"city\":\"\\u6ee8\\u5dde\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"113.238.188.100\",\"port\":14568,\"expire_time\":\"2019-07-04 19:57:08\",\"city\":\"\\u76d8\\u9526\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"223.243.204.199\",\"port\":4945,\"expire_time\":\"2019-07-04 19:50:30\",\"city\":\"\\u868c\\u57e0\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"60.187.55.39\",\"port\":940,\"expire_time\":\"2019-07-04 20:00:31\",\"city\":\"\\u7ecd\\u5174\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"61.145.34.219\",\"port\":62563,\"expire_time\":\"2019-07-04 20:00:31\",\"city\":\"\\u6c5f\\u95e8\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.98.162.177\",\"port\":14568,\"expire_time\":\"2019-07-04 20:00:40\",\"city\":\"\\u829c\\u6e56\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.247.60.251\",\"port\":62563,\"expire_time\":\"2019-07-04 20:00:41\",\"city\":\"\\u6587\\u5c71\\u58ee\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"220.165.154.68\",\"port\":940,\"expire_time\":\"2019-07-04 20:01:12\",\"city\":\"\\u4e34\\u6ca7\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.243.234.191\",\"port\":940,\"expire_time\":\"2019-07-04 19:55:18\",\"city\":\"\\u6587\\u5c71\\u58ee\\u65cf\\u82d7\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"112.113.155.183\",\"port\":940,\"expire_time\":\"2019-07-04 19:55:15\",\"city\":\"\\u4fdd\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"117.64.227.23\",\"port\":7791,\"expire_time\":\"2019-07-04 19:55:18\",\"city\":\"\\u5408\\u80a5\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"112.113.155.127\",\"port\":7791,\"expire_time\":\"2019-07-04 19:50:12\",\"city\":\"\\u4fdd\\u5c71\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"27.214.85.16\",\"port\":14568,\"expire_time\":\"2019-07-04 19:50:17\",\"city\":\"\\u6f4d\\u574a\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"114.228.202.119\",\"port\":940,\"expire_time\":\"2019-07-04 19:40:22\",\"city\":\"\\u5e38\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"180.127.81.167\",\"port\":62563,\"expire_time\":\"2019-07-04 20:02:38\",\"city\":\"\\u8fde\\u4e91\\u6e2f\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"36.56.145.75\",\"port\":7791,\"expire_time\":\"2019-07-04 20:02:27\",\"city\":\"\\u6c60\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"175.44.153.214\",\"port\":7791,\"expire_time\":\"2019-07-04 19:37:14\",\"city\":\"\\u4e09\\u660e\",\"isp\":\"\\u8054\\u901a\"},{\"ip\":\"117.90.2.90\",\"port\":271,\"expire_time\":\"2019-07-04 19:40:31\",\"city\":\"\\u9547\\u6c5f\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.105.187.183\",\"port\":14568,\"expire_time\":\"2019-07-04 19:50:23\",\"city\":\"\\u4eb3\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.220.145.189\",\"port\":7791,\"expire_time\":\"2019-07-04 20:01:43\",\"city\":\"\\u82cf\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"183.150.60.130\",\"port\":940,\"expire_time\":\"2019-07-04 19:56:46\",\"city\":\"\\u8862\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"114.99.22.246\",\"port\":7791,\"expire_time\":\"2019-07-04 19:47:09\",\"city\":\"\\u94dc\\u9675\",\"isp\":\"\\u7535\\u4fe1\"},{\"ip\":\"182.243.148.5\",\"port\":4945,\"expire_time\":\"2019-07-04 20:00:44\",\"city\":\"\\u5fb7\\u5b8f\\u50a3\\u65cf\\u666f\\u9887\\u65cf\\u81ea\\u6cbb\\u5dde\",\"isp\":\"\\u7535\\u4fe1\"}]}";
        //使用正则处理字符串
        Pattern pattern = Pattern.compile(",\"data\":(.*)}]}");
        Matcher matcher = pattern.matcher(str);
        String group ="";
        while (matcher.find()) group = matcher.group();


        //截取字符串
        String substring = group.substring(8, group.length() - 1);
        List<ProxyIpInfo> ips = JSONArray.parseArray(substring, ProxyIpInfo.class);
        return FXCollections.observableArrayList(ips);
    }

    /**
     * 处理批量访问
     * 参数1 传入关键词
     * 参数2 传入代理IP的列表
     * @param param
     * @param proxyIpInfos
     */
    public static void cons(String param,ObservableList<ProxyIpInfo> proxyIpInfos){

        int zongShu = proxyIpInfos.size();

        for (int i = 0; i < zongShu ; i++) {
            ProxyIpInfo proxyIpInfo = proxyIpInfos.get(i);
            //1.新建一条线程,传入参数
            MyTask myTask = new MyTask(param,proxyIpInfo.getIp(),Integer.valueOf(proxyIpInfo.getPort()),i);
            proxyIpInfos.get(i).setResult("关键词: " + param);
            Thread thread = new Thread(myTask);
            //2.创建监听,监听中,对结果进行处理,表格发红或发绿
            myTask.valueProperty().addListener((observable, oldValue, newValue) -> {
                if (newValue != null){
                    count++;
                    String[] split = newValue.split(",");
                    if (split[0].equals("error")){
                        proxyIpInfos.get(Integer.valueOf(split[1])).setResult("失败!" + param);
                    }else if (split[0].equals("OK")){
                        proxyIpInfos.get(Integer.valueOf(split[1])).setResult("- 成功 -" + param);
                    }
                }
            });
            //3.开启线程
            thread.start();
        }




    }

}
